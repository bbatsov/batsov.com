I"»<p>I often see this question asked - ‚ÄúI‚Äôm getting the following error</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>OpenSSL::SSL::SSLError: hostname was not match with the server certificate
</code></pre></div></div>

<p>when trying to deliver an email with Rails 3. How can I solve the problem?‚Äù</p>

<p>Obviously the best solution would be get a valid certificate for your hostname, but sometimes
this is not possible or you simply don‚Äôt want to bother with this stuff (on your development machine for instance).
The solution to the problem commonly suggested is to turn off encryption completely like this:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">ActionMailer</span><span class="o">::</span><span class="no">Base</span><span class="p">.</span><span class="nf">smtp_settings</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">:address</span>              <span class="o">=&gt;</span> <span class="s1">'mail.foo.com'</span><span class="p">,</span>
  <span class="ss">:port</span>                 <span class="o">=&gt;</span> <span class="mi">587</span><span class="p">,</span>
  <span class="ss">:domain</span>               <span class="o">=&gt;</span> <span class="s1">'foo.com'</span><span class="p">,</span>
  <span class="ss">:user_name</span>            <span class="o">=&gt;</span> <span class="s1">'addy@foo.com'</span><span class="p">,</span>
  <span class="ss">:password</span>             <span class="o">=&gt;</span> <span class="s1">'foofoo'</span><span class="p">,</span>
  <span class="ss">:authentication</span>       <span class="o">=&gt;</span> <span class="s1">'plain'</span><span class="p">,</span>
  <span class="ss">:enable_starttls_auto</span> <span class="o">=&gt;</span> <span class="kp">true</span>
<span class="p">}</span>
</code></pre></div></div>

<p>This bit of code represent a portion of your <code class="language-plaintext highlighter-rouge">ActionMailer</code> configuration and you‚Äôd put it in <code class="language-plaintext highlighter-rouge">application.rb</code> or
<code class="language-plaintext highlighter-rouge">env.rb</code> (where env is something like <code class="language-plaintext highlighter-rouge">development</code>, <code class="language-plaintext highlighter-rouge">staging</code>, <code class="language-plaintext highlighter-rouge">production</code>, etc).</p>

<p>While the solution is OK for <code class="language-plaintext highlighter-rouge">development.rb</code> you‚Äôd be crazy to use
this code in production! Disabling encryption means that your username
and password will traverse the Internet in plain text! A simple, but
secure solution would be to just disable the certificate validation,
without sacrificing the secure connection:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">ActionMailer</span><span class="o">::</span><span class="no">Base</span><span class="p">.</span><span class="nf">smtp_settings</span> <span class="o">=</span> <span class="p">{</span>
  <span class="ss">:address</span>              <span class="o">=&gt;</span> <span class="s1">'mail.foo.com'</span><span class="p">,</span>
  <span class="ss">:port</span>                 <span class="o">=&gt;</span> <span class="mi">587</span><span class="p">,</span>
  <span class="ss">:domain</span>               <span class="o">=&gt;</span> <span class="s1">'foo.com'</span><span class="p">,</span>
  <span class="ss">:user_name</span>            <span class="o">=&gt;</span> <span class="s1">'addy@foo.com'</span><span class="p">,</span>
  <span class="ss">:password</span>             <span class="o">=&gt;</span> <span class="s1">'foofoo'</span><span class="p">,</span>
  <span class="ss">:authentication</span>       <span class="o">=&gt;</span> <span class="s1">'plain'</span><span class="p">,</span>
  <span class="ss">:enable_starttls_auto</span> <span class="o">=&gt;</span> <span class="kp">true</span><span class="p">,</span>
  <span class="ss">:openssl_verify_mode</span>  <span class="o">=&gt;</span> <span class="s1">'none'</span>
<span class="p">}</span>
</code></pre></div></div>

<p>This code snippet is mostly the same as the one shown before. The crucial difference is the line
<code class="language-plaintext highlighter-rouge">:openssl_verify_mode =&gt; 'none'</code>.</p>

<p>I hope someone will find this short article useful. Happy hacking!</p>
:ET