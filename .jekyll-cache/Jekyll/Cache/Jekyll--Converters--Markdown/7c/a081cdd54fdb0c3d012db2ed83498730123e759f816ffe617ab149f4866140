I"ˇ,<p><a href="https://github.com/clojure-emacs/cider">CIDER</a> 0.7 is finally out and
it‚Äôs an epic release! It‚Äôs without a doubt the most important release
since the inception of the project about two years ago and it‚Äôs the
biggest one in terms of features and code changes.</p>

<p>The release is special for a number of reasons. Allow me to quickly
enumerate though them.</p>

<!--more-->

<h2 id="middleware-based">Middleware-based</h2>

<p>One of the huge problems we‚Äôve had so far was that a lot of
functionality that was present in SLIME + swank-clojure was missing in
CIDER. For many people the transition between the two didn‚Äôt really
feel like an upgrade (although it was advertised as such) - after all
they lost things like inspection, tracing, apropos, caller cross-reference, the
debugger, etc.</p>

<p>The reason this happened was CIDER‚Äôs initial approach of implementing
features by inlining Clojure code within the Emacs Lisp code and
evaluating this code in a dedicated nREPL session (called the tooling
session), to avoid contaminating the results in the ‚Äúprimary‚Äù eval
session. This approach had one upside (you didn‚Äôt need any extra deps
(middleware) to run CIDER) and one huge downside (it‚Äôs impossible
to maintain non-trivial inlined code; not to mention it‚Äôs not very
practical). This meant that pretty much all third party libs were out
of the equation and pretty much every advanced feature.</p>

<p>This problem was initially addressed by
<a href="https://github.com/pallet/ritz">ritz</a>, which provided some extra
functionality built on top of extra nREPL middleware. As it was a
separate project it was hard to be kept in sync with the flurry of
changes in CIDER and was abandoned at some point. While <code class="language-plaintext highlighter-rouge">ritz</code> failed
it had the right approach and it served as the principle inspiration
for CIDER 0.7.</p>

<p>In CIDER 0.6 we introduced optional nREPL middleware for some
operations (like completion, error reporting, var info) and in 0.7 the
middleware stack was greatly extended, improved and promoted to a
mandatory CIDER component. This has one downside (you‚Äôll have to
install it to leverage all of CIDER‚Äôs power) and a several upsides:</p>

<ul>
  <li>
    <p>A lot of the heavy lifting is now done in pure Clojure code (see
<a href="https://github.com/clojure-emacs/cider-nrepl">cider-nrepl</a>) and it‚Äôs
much easier to implement complex features now (not to mention - this
code is much easier to maintain). This also means that it‚Äôs much
easier for Clojure programmers to contribute to CIDER as a lot of
functionality is just lots of Clojure code and very little Emacs Lisp
code. I‚Äôm reasonably sure I‚Äôm one of the very few CIDER users who
knows more Emacs Lisp than Clojure, so I consider this a big win.</p>
  </li>
  <li>
    <p>It‚Äôs now easy to provide pretty similar level of support for both
Clojure and ClojureScript as we can reconcile the differences
between them in our middleware.</p>
  </li>
  <li>
    <p>It‚Äôs easier to keep the code backwards compatible (which is a
nightmare for inlined code).</p>
  </li>
  <li>
    <p>There are no implicit dependencies in the system (unlike before).</p>
  </li>
</ul>

<p>Consider auto-completion - this feature was implemented in terms of
evaluating some <code class="language-plaintext highlighter-rouge">clojure-complete</code> code with the assumption that
<code class="language-plaintext highlighter-rouge">clojure-complete</code> is available in the environment you were using as
CIDER assumed you had started the nREPL server using <code class="language-plaintext highlighter-rouge">lein repl</code>. This
would fire up a REPL-y REPL and <code class="language-plaintext highlighter-rouge">clojure-complete</code> is a REPL-y
dependency. Not everyone uses <code class="language-plaintext highlighter-rouge">lein repl</code>, though and REPL-y can always
switch to another completion library in the future.</p>

<p>If you connected CIDER to an embedded nREPL server,
you‚Äôd be greeted by a missing class error, as most apps don‚Äôt normally
depend on <code class="language-plaintext highlighter-rouge">clojure-complete</code>. You‚Äôd be puzzled for a while, but eventually
you‚Äôll realize what the problem is.</p>

<p>Now we‚Äôre free to explicitly specify our deps and pick the best
libraries for the job (as opposed to those that are available) -
you‚Äôll quickly notice how smarter auto-completion is now on Clojure,
because we‚Äôre internally using the newer, faster and more feature-rich
<a href="https://github.com/alexander-yakushev/compliment">compliment</a> library
(note that we‚Äôre using a different library for ClojureScript
completion).</p>
<ul>
  <li>Other projects can leverage some of our middleware - somewhat
amusingly for Emacs users, <code class="language-plaintext highlighter-rouge">vim-fireplace</code> is using <code class="language-plaintext highlighter-rouge">cider-nrepl</code>
as well.</li>
</ul>

<p>At this point we‚Äôve removed pretty much all inlined code (except some
pretty-printing code) and that has yielded much improved eldoc,
macroexpansion, documentation viewing (<code class="language-plaintext highlighter-rouge">cider-doc</code> will now display
Javadoc in Emacs!!!), source browsing, etc.</p>

<p>We‚Äôve also started bringing back some features we loved in SLIME, but
were missing so far - the inspector, apropos and tracing are back. We‚Äôre now working on
bringing back function call cross-referencing and debugging as well.</p>

<p>Note that CIDER will still work if you connect to an nREPL server
that‚Äôs not using CIDER‚Äôs middleware. In this case you‚Äôll get a
warning and a pretty limited feature-set - source file loading, code
evaluation, pretty-printing and error highlighting.</p>

<h2 id="cider-test">cider-test</h2>

<p><code class="language-plaintext highlighter-rouge">clojure-test-mode</code> (which was more or less abandoned in terms of
maintenance) finally has a successor in CIDER itself. <code class="language-plaintext highlighter-rouge">cider-test</code>
provides more or less the same functionality, but is implemented in
terms of nREPL middleware and is a more robust solution. As it‚Äôs part
of CIDER it cannot ever be out-of-sync with CIDER as <code class="language-plaintext highlighter-rouge">clojure-test-mode</code> has
often been lately.</p>

<p><code class="language-plaintext highlighter-rouge">cider-test</code> is a little rough around the edges, but I‚Äôm fairly sure it has bright future
ahead. Use it, love it, hate it and send us your feedback! We‚Äôd love to hear it.</p>

<p><strong>P.S.</strong> We might extend this with support for other frameworks like
<code class="language-plaintext highlighter-rouge">midje</code> and <code class="language-plaintext highlighter-rouge">expectations</code>, although that‚Äôs not high on our priority
list.</p>

<h2 id="grimoire-support">Grimoire support</h2>

<p>In addition to built-in Clojure &amp; Javadoc you can now peruse the
extended documentation provided by
<a href="http://grimoire.arrdem.com/">Grimoire</a> from the comfort of your
beloved editor. No more browser interruptions just to get a few usage
examples of some function! <code class="language-plaintext highlighter-rouge">C-c C-d g</code> for the win!</p>

<p>Adding some extended Grimoire integration is definitely on the roadmap.</p>

<h2 id="increased-bus-factor">Increased bus factor</h2>

<p>One of the biggest problems of the project so far was that fairly few people
were involved with it.  At one point it was mostly Tim, Hugo and
me. At another it was mostly me. The bus factor was dangerously close
to 1, which always worried me. Recently, however, a lot of people have
been helping quite actively, which makes me more optimistic about the
future. As much as I love CIDER I don‚Äôt want it to depend on one
extremely busy and very clumsy person (each time I go hiking there‚Äôs a
serious chance I‚Äôll fall of a cliff or something).</p>

<p>I‚Äôd like to thank everyone for your wonderful contributions and single
out a bunch of people for some outstanding work done by them:</p>

<ul>
  <li><a href="https://github.com/gtrak">Gary Trakhman</a> is the one responsible for
the good ClojureScript support we now boast. Fantastic work, Gary! You have a big thanks from me!</li>
  <li><a href="https://github.com/jeffvalk">Jeff Valk</a> did some mighty fine work
on the var info retrieval, source navigation, documentation display
and single-handedly implemented <code class="language-plaintext highlighter-rouge">cider-test</code> and <code class="language-plaintext highlighter-rouge">cider-apropos</code>. We
all owe Jeff a huge thanks!</li>
  <li><a href="https://github.com/hugoduncan">Hugo Duncan</a> who constantly
  contributed patches, bug reports and ideas. His <code class="language-plaintext highlighter-rouge">nrepl-ritz</code>
  project provided a lot of inspiration for some of the existing
  middleware.</li>
  <li><a href="https://github.com/eslick">Ian Eslick</a> contributed the new inspector.</li>
  <li><a href="https://github.com/alexander-yakushev/compliment">Alexander Yakushev</a>
  made so many improvements to his awesome <code class="language-plaintext highlighter-rouge">compliment</code>
  library for the needs of CIDER. Did you notice that you now get
  completion suggestions for <strong>locals</strong>? How amazing is that!</li>
  <li><a href="https://github.com/dgutov">Dmitry Gutov</a> implemented native support in CIDER for <code class="language-plaintext highlighter-rouge">company-mode</code>.</li>
</ul>

<h2 id="the-road-before-us">The Road Before Us</h2>

<p>Obviously our work is far from over - we‚Äôre still lacking some crucial
features (most notably a debugger) and a lot of code needs
polish. This will obviously take some time and a lot of work to get right, but I‚Äôm
confident we‚Äôll get there.</p>

<p>I‚Äôd also want us to work a bit in the area of documentation - a
manual, a cheatsheet, etc. Have a look at the
<a href="https://github.com/clojure-emacs/cider/issues">issue tracker</a> if
you‚Äôd like to help out - we definitely need all the help we can get.</p>

<p>The 0.7 release required a massive amount of work and we spent more that 3 months to get it to
a shippable state. With the bulk of the work behind us I hope we‚Äôll be able to deliver new
releases more frequently - on a monthly (or bi-monthly) basis.</p>

<p>I‚Äôd love to be able to raise a lot of money via crowd-funding and work
on CIDER for an year or get hired by some company to work full-time on
it, but that‚Äôs not going to happen. For one reason or another people
rarely get excited about dev tools, so all of us have to work together
to make CIDER the ultimate Clojure(Script) development environment.</p>

<p>If I knew how much work I‚Äôd have to do when I assumed the maintenance
of CIDER exactly one year ago I might not have done it. Maintaining a
project that‚Äôs pivotal to an entire community (I recall some article
mentioning about half the Clojure devs were using it) is both a lot of
work and a lot of stress and pressure. That said, it‚Äôs probably my
favourite OSS project and I enjoy working on it immensely.</p>

<p>For all the gory details regarding new features and changes in CIDER 0.7 - take a look at the
<a href="https://github.com/clojure-emacs/cider/blob/master/CHANGELOG.md">changelog</a>.</p>

<p>That‚Äôs all from me, folks! Use CIDER, drink cider and prosper!</p>
:ET